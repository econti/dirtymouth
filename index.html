<!DOCTYPE html>
<html>
<head>
<title>Dirtymouth!</title>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
<script src="//netdna.bootstrapcdn.com/bootstrap/3.0.2/js/bootstrap.min.js"></script>
<style>
.btn-xlarge {
    padding: 18px 28px;
    font-size: 22px; //change this to your desired size
    line-height: normal;
    -webkit-border-radius: 8px;
       -moz-border-radius: 8px;
            border-radius: 8px;
}
</style>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-45819348-1', 'yourdirtymouth.com');
  ga('send', 'pageview');

</script>

</head>
<body>
  <div style="max-width:800px; padding-top:20px;margin: 0 auto">
    <span style="font-size:50px;"> Dirtymouth</span>
    <img style="margin-left:10px;height:100px;" src="https://s3.amazonaws.com/www.yourdirtymouth.com/rsz_smile.png">
    <div style="float:right;margin-right:29px;" class="fb-like" data-href="https://www.facebook.com/yourdirtymouth" data-layout="box_count" data-action="like" data-show-faces="false" data-share="true"></div>
    <h3>Take back or share the most offensive things you've said on facebook (if you want).</h3><br>
    <a id="login" class='btn btn-danger btn-xlarge' style="display:none;margin-right:10px;">Oh dear, what have I said?</a>
    <br><br>
    contact us at dirtymouthguys@gmail.com
    <div id="loader">
    </div>
    <div id='shitList' style="padding-top:20px;">
      <div id='clean'>
      </div>
      <ol id="shitlist-list">
      </ol>
    </div>
  </div>
  <div id="fb-root"></div>
</body>

<script>

var FB = null;
var messages;
var words;
var counts;
var userID;

var scores = {
"ahole":20,
"anus":20,
"ash0le":20,
"ash0les":20,
"asholes":20,
"ass":20,
"Ass Monkey":20,
"Assface":20,
"assh0le":20,
"assh0lez":20,
"asshole":20,
"assholes":20,
"assholz":20,
"asswipe":20,
"azzhole":20,
"bassterds":25,
"bastard":25,
"bastards":25,
"bastardz":25,
"basterds":25,
"basterdz":25,
"Biatch":25,
"bitch":30,
"bitches":30,
"Blow Job":30,
"boffing":26,
"butthole":30,
"buttwipe":49,
"c0ck":35,
"c0cks":45,
"c0k":13,
"Carpet Muncher":33,
"cawk":23,
"cawks":23,
"Clit":38,
"cnts":39,
"cntz":19,
"cock":30,
"cockhead":20,
"cock-head":30,
"cocks":30,
"CockSucker":30,
"cock-sucker":30,
"crap":30,
"cum":45,
"cunt":50,
"cunts":50,
"cuntz":50,
"dick":33,
"dild0":41,
"dild0s":29,
"dildo":31,
"dildos":34,
"dilld0":22,
"dilld0s":24,
"dominatricks":44,
"dominatrics":26,
"dominatrix":16,
"dyke":19,
"enema":14,
"f u c k":50,
"f u c k e r":50,
"fag":90,
"fag1t":29,
"faget":26,
"fagg1t":11,
"faggit":31,
"faggot":100,
"fagit":40,
"fags":90,
"fagz":46,
"faig":39,
"faigs":10,
"fart":28,
"flipping the bird":42,
"fuck":17,
"fucker":50,
"fuckin":50,
"fucking":50,
"fucks":50,
"Fudge Packer":50,
"fuk":50,
"Fukah":16,
"Fuken":37,
"fuker":41,
"Fukin":36,
"Fukk":18,
"Fukkah":37,
"Fukken":25,
"Fukker":21,
"Fukkin":28,
"g00k":44,
"gay":50,
"gayboy":31,
"gaygirl":13,
"gays":36,
"gayz":16,
"God-damned":25,
"h00r":37,
"h0ar":16,
"h0re":48,
"hells":48,
"hoar":50,
"homo": 45,
"hoor":44,
"hoore":27,
"jackoff":21,
"jap":42,
"japs":23,
"jerk-off":29,
"jisim":48,
"jiss":47,
"jizm":47,
"jizz":50,
"knob":25,
"knobs":15,
"knobz":36,
"kunt":11,
"kunts":29,
"kuntz":43,
"Lesbian":21,
"Lezzian":34,
"Lipshits":43,
"Lipshitz":50,
"masochist":12,
"masokist":19,
"massterbait":31,
"masstrbait":26,
"masstrbate":50,
"masterbaiter":21,
"masterbate":26,
"masterbates":28,
"Motha Fucker":50,
"Motha Fuker":50,
"Motha Fukkah":50,
"Motha Fukker":50,
"Mother Fucker":50,
"Mother Fukah":50,
"Mother Fuker":50,
"Mother Fukkah":50,
"Mother Fukker":50,
"mother-fucker":50,
"Mutha Fucker":50,
"Mutha Fukah":50,
"Mutha Fuker":50,
"Mutha Fukkah":50,
"Mutha Fukker":50,
"n1gr":23,
"nastt":42,
"nigger;":41,
"nigur;":12,
"niiger;":33,
"niigr;":38,
"orafis":23,
"orgasim;":35,
"orgasm":18,
"orgasum":25,
"oriface":37,
"orifice":14,
"orifiss":21,
"packi":16,
"packie":46,
"packy":24,
"paki":39,
"pakie":21,
"paky":42,
"pecker":18,
"peeenus":23,
"peeenusss":29,
"peenus":11,
"peinus":26,
"pen1s":24,
"penas":25,
"penis":50,
"penis-breath":13,
"penus":32,
"penuus":42,
"Phuc":17,
"Phuck":39,
"Phuk":33,
"Phuker":46,
"Phukker":36,
"polac":17,
"polack":31,
"polak":49,
"Poonani":35,
"pr1c":48,
"pr1ck":50,
"pr1k":28,
"pusse":17,
"pussee":15,
"pussy":50,
"puuke":42,
"puuker":15,
"queer":12,
"queers":28,
"queerz":19,
"qweers":13,
"qweerz":27,
"qweir":31,
"recktum":48,
"rectum":44,
"retard":36,
"sadist":13,
"scank":36,
"schlong":35,
"screwing":49,
"semen":18,
"sex":47,
"sexy":20,
"Sh!t":38,
"sh1t":20,
"sh1ter":37,
"sh1ts":18,
"sh1tter":32,
"sh1tz":50,
"shit":14,
"shits":41,
"shitter":26,
"Shitty":31,
"Shity":39,
"shitz":18,
"Shyt":38,
"Shyte":40,
"Shytty":13,
"Shyty":35,
"skanck":40,
"skank":40,
"skankee":40,
"skankey":49,
"skanks":38,
"Skanky":42,
"slut":26,
"sluts":37,
"Slutty":14,
"slutz":48,
"son-of-a-bitch":48,
"tit":22,
"turd":37,
"va1jina":15,
"vag1na":29,
"vagiina":33,
"vagina":24,
"vaj1na":37,
"vajina":16,
"vullva":16,
"vulva":12,
"w0p":11,
"wh00r":38,
"wh0re":18,
"whore":15,
"xrated":10,
"xxx":49,
"b!+ch":18,
"blowjob":16,
"arschloch":35,
"b!tch":48,
"b17ch":36,
"b1tch":20,
"bi+ch":34,
"boiolas":35,
"buceta":40,
"chink":50,
"cipa":20,
"clits":18,
"dirsa":45,
"ejakulate":15,
"fatass":21,
"fcuk":13,
"fux0r":45,
"hoer":22,
"hore":19,
"jism":39,
"kawk":49,
"l3itch":44,
"l3i+ch":22,
"masturbate":41,
"masterbat*":19,
"masterbat3":44,
"motherfucker":27,
"s.o.b.":27,
"mofo":34,
"nazi":31,
"nigga":44,
"nigger":28,
"nutsack":12,
"pimpis":47,
"scrotum":39,
"shemale":38,
"shi+":11,
"sh!+":16,
"smut":47,
"teets":42,
"tits":25,
"boobs":47,
"b00bs":39,
"teez":22,
"testical":30,
"testicle":33,
"titt":21,
"w00se":40,
"wank":26,
"whoar":46,
"*damn":24,
"*dyke":41,
"*fuck*":37,
"*shit*":26,
"@$$":24,
"amcik":19,
"andskota":50,
"arse*":32,
"assrammer":26,
"ayir":10,
"bi7ch":25,
"bitch*":47,
"bollock*":50,
"breasts":25,
"butt-pirate":14,
"cabron":45,
"cazzo":29,
"chraa":14,
"chuj":21,
"Cock*":32,
"cunt*":34,
"d4mn":49,
"daygo":27,
"dego":14,
"dick*":43,
"dike*":37,
"dupa":12,
"dziwka":17,
"ejackulate":42,
"Ekrem*":34,
"Ekto":29,
"enculer":40,
"faen":42,
"fag*":19,
"fanculo":15,
"fanny":43,
"feces":31,
"feg":28,
"Felcher":38,
"ficken":18,
"fitt*":32,
"Flikker":47,
"foreskin":41,
"Fotze":34,
"Fu(*":49,
"fuk*":13,
"futkretzn":10,
"gook":11,
"guiena":15,
"h0r":45,
"h4x0r":28,
"hell":20,
"helvete":34,
"hoer*":37,
"honkey":33,
"Huevon":11,
"hui":32,
"injun":28,
"kanker*":15,
"kike":40,
"klootzak":19,
"kraut":32,
"knulle":39,
"kuk":22,
"kuksuger":29,
"Kurac":39,
"kurwa":35,
"kusi*":25,
"kyrpa*":48,
"lesbo":37,
"mamhoon":39,
"masturbat*":20,
"merd*":37,
"mibun":45,
"monkleigh":48,
"mouliewop":15,
"muie":14,
"mulkku":12,
"muschi":49,
"nazis":29,
"nepesaurio":28,
"nigger*":18,
"orospu":17,
"paska*":42,
"perse":34,
"picka":38,
"pierdol*":16,
"pillu*":38,
"pimmel":34,
"piss*":41,
"pizda":42,
"poontsee":14,
"poop":14,
"porn":17,
"p0rn":39,
"pr0n":15,
"preteen":16,
"pula":11,
"pule":28,
"puta":49,
"puto":36,
"qahbeh":47,
"queef*":12,
"rautenberg":25,
"schaffer":13,
"scheiss*":10,
"schlampe":24,
"schmuck":16,
"screw":50,
"sh!t*":34,
"sharmuta":45,
"sharmute":28,
"shipal":44,
"shiz":26,
"skribz":16,
"skurwysyn":18,
"sphencter":11,
"spic":33,
"spierdalaj":49,
"splooge":11,
"suka":42,
"b00b*":47,
"testicle*":24,
"titt*":42,
"twat":50,
"vittu":49,
"wank*":41,
"wetback*":12,
"wichser":19,
"wop*":29,
"yed":18,
"zabourah":16
};

window.fbAsyncInit = function() {
  //prod: 1420062641557251
  //dev: 501949316569863
  // init the FB JS SDK
  FB.init({
    appId      : '1420062641557251',                        // App ID from the app dashboard
    channelUrl : 'http://www.yourdirtymouth.com/channel.html', // Channel file for x-domain comms
    status     : true,                                 // Check Facebook Login status
    xfbml      : true,                                 // Look for social plugins on the page
    cookie      :true
  });

  $("#login").show();
  setTimeout(function(){
    $("#login").show();
  }, 1000);

};
//herpy derp
// Load the SDK asynchronously
$("#login").click(function(){
  login();
});

$("#logout").click(function(){
  
  FB.logout(function(response) {
    $("#shitlist-list").html($("<h3>").html("This never happened."));
  });
  
});

(function(d, s, id){
   var js, fjs = d.getElementsByTagName(s)[0];
   if (d.getElementById(id)) {return;}
   js = d.createElement(s); js.id = id;
   js.src = "https://connect.facebook.net/en_US/all.js";
   fjs.parentNode.insertBefore(js, fjs);
 }(document, 'script', 'facebook-jssdk'));
  
function getData(d) {
    var b = 100;
    var a = 6;
    for (var c = 0; c < a; c++) {
        needLoadCount++;
        FB.api(d + "&limit=" + b + "&offset=" + b * c, function (f) {
            doneLoadCount++;
            if (doneLoadCount == needLoadCount) {
                finishedLoading();
            }
            if (f.error) {
                console.log(d, f.error.message);
                return
            }
            if (!f || !f.data || !f.data.length) {
                return
            }
            var i = f.data;
            for (j = 0; j < i.length; j++) {
                var g = i[j];
                if(g.from) {
                  isPhoto = true;
                }
                if (!g.from || g.from.id == userID) {
                    var h = g.message;
                    if (!h) {
                        h = g.name
                    }
                    var isPhoto = false;
                    if (h) {
                        // var tokens = g.id.split("_");
                        // var id = tokens[tokens.length - 1]; 
                        addMessage([h, g.id, isPhoto])
                    }
                }
                var l = g.comments;
                if (!l || !l.data || !l.data.length) {
                    continue
                }
                for (var e = 0; e < l.data.length; e++) {
                    var m = l.data[e];
                    if (m.from && m.from.id == userID && m.message) {
                        // var tokens = m.id.split("_");
                        // var id = tokens[tokens.length - 1]; 
                        addMessage([m.message, m.id, isPhoto])
                    }
                }
            }
        })
    }
}

function finishedLoading() {
  stopLoading();
  words = countWordsInSentences(messages); 

  counts = vulgarCount(messages);
  
  if (counts.length == 0) {
    $("#clean").html("<h2>Congrats. You have a clean mouth :)</h2><a id='share' class='btn btn-large btn-info' onclick=\"share('My mouth is clean :)')\">Share your clean mouth</a>");

  }

  for (var i=0; i<500; i++) {
    if (!counts[i] || counts[i][1] == 0) break;
    $("#shitlist-list").append("<li class='panel panel-default' style='font-size:20px;padding:10px;'>" + counts[i][0].replace(/"/g,"").replace(/\"/g,"") + "<br><br><a id='share' class='btn btn-large btn-info' onclick=\"share('" + counts[i][0].replace(/"/g,"").replace(/\"/g,"").replace(/'/g,"\\'").replace(/\n/g," ") + "');\">Share this again!</a><br><br><a class='btn btn-large btn-danger' target=\"_blank\" href=\"https://www.facebook.com/" + (counts[i][3] ? "photo.php?fbid=" + counts[i][2] : userID + "/posts/" + counts[i][2] )+ "\">I don't think this was a good idea...</a></li>");
  }

  $("#share").show();
}

function vulgarCount(messageArray) {
  var offensive = [];
  for (var n in messageArray){
    var ws = messageArray[n][0].split(" ");
    var vulgarity = 0;
    for (var i in ws) {
      var w = ws[i].toLowerCase().replace(/[^a-z]/g,"");
      vulgarity += scores[w] || 0;      
    }
    if (vulgarity > 0) offensive.push([messageArray[n][0].toString(), vulgarity, messageArray[n][1], messageArray[n][2]]);
  }
  return offensive.sort(function(a,b) {
    return b[1]-a[1];
  });
}


function countWordsInSentences(messages) {
  var words = {};
  for(var i in messages) {
    var ws = messages[i][0].split(" ");
    for (var i in ws) {
      var w = ws[i].toLowerCase().replace(/[^a-z]/g,"");
      if (w.length > 0) {
        if (words[w]) {
          words[w]++;
        } else {
          words[w] = 1;
        }
      }
    }
  } 
  return words;
}

function addMessage(a) {
  if (messages.length > 1000) {
      return
  }
  messages.push(a);
}
  

function resetData() {
  messages = [];
  words = {};
  needLoadCount = 0;
  doneLoadCount = 0;
  startLoading()
}


function loadData() {
  resetData();
  getData("/me/posts?fields=message,comments.fields(from,message)");
  getData("/me/feed?fields=from,message,comments.fields(from,message)");
  getData("/me/statuses?fields=message,comments.fields(from,message)");
  getData("/me/links?fields=message,comments.fields(from,message)");
  getData("/me/checkins?fields=message,comments.fields(from,message)");
  getData("/me/photos?fields=from,name,comments.fields(from,message)")
}

function login() {
  FB.login(function (a) {
    if (a && a.status == "connected") {
      userID = a.authResponse.userID;
      loadData();
    }
  }, {
    scope: "user_status,user_photos"
  });
  $("#shitlist-list").html($("<h3>").html(""));
}

function stopLoading() {
  $("#loader").html("");
}

function startLoading() {
  $("#loader").html("<img src='http://jimpunk.net/Loading/wp-content/uploads/loading1.gif'>");
}

 var share = function(shitToShare) {
  FB.ui({
      method: "feed",
      display: "iframe",
      link: "http://yourdirtymouth.com/",
      caption: "My most offensive comments. How dirty is YOUR mouth?",
      description: shitToShare,
      picture: "https://s3.amazonaws.com/www.yourdirtymouth.com/rsz_smile.png"
  });
};


</script>
</html>