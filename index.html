<!DOCTYPE html>
<html>
<head>
<title>Dirtymouth!</title>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
<script src="//netdna.bootstrapcdn.com/bootstrap/3.0.2/js/bootstrap.min.js"></script>
<style>
.btn-xlarge {
    padding: 18px 28px;
    font-size: 22px; //change this to your desired size
    line-height: normal;
    -webkit-border-radius: 8px;
       -moz-border-radius: 8px;
            border-radius: 8px;
}
</style>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-45819348-1', 'yourdirtymouth.com');
  ga('send', 'pageview');

</script>

</head>
<body>
  <div style="max-width:800px; padding-top:20px;margin: 0 auto">
    <span style="font-size:50px;"> Dirtymouth</span>
    <img style="margin-left:10px;height:100px;" src="https://s3.amazonaws.com/www.yourdirtymouth.com/rsz_smile.png">
    <div style="float:right;margin-right:29px;" class="fb-like" data-href="https://www.facebook.com/yourdirtymouth" data-layout="box_count" data-action="like" data-show-faces="false" data-share="true"></div>
    <h3>Take back or share the most offensive things you've said on facebook (if you want).</h3><br>
    <a id="login" class='btn btn-danger btn-xlarge' style="display:none;margin-right:10px;">Oh dear, what have I said?</a>
    <br><br>
    contact us at dirtymouthguys@gmail.com
    <div id="loader">
    </div>
    <div id='shitList' style="padding-top:20px;">
      <div id='clean'>
      </div>
      <ol id="shitlist-list">
      </ol>
    </div>
  </div>
  <div id="fb-root"></div>
</body>

<script>
var messages;
var words;
var counts;
var userID;

var phrases = {
"blow job":30,
"carpet muncher":33,
"fudge packer":50,
"hate my life": 50,
"so gay":10,
"jack off": 10,
"black out": 20,
"f u c k":50,
"hate my job": 30,
"flip the beanbag": 100,
"flipping the bird":42,
"hung over": 20,
"my boss is an asshole": 30,
"hang over": 20,
"that's gay": 14
}

var scores = {
"@$$":24,
"Biatch":2,
"Ekrem":34,
"Ekto":29,
"Felcher":38,
"Flikker":47,
"Fotze":34,
"God-damned":25,
"Huevon":11,
"Kurac":39,
"Lezzian":34,
"Phuc":17,
"Phuk":33,
"Poonani":35,
"Sh!t":38,
"Shyt":38,
"ahole":20,
"amcik":19,
"andskota":50,
"anus":20,
"arschloch":35,
"arse":32,
"arses":33,
"ash0le":20,
"asholes":20,
"ass":20,
"asses":20,
"asshole":25,
"ayir":10,
"azzhole":20,
"b!+ch":18,
"b!tch":48,
"boob":24,
"b00bs":39,
"b17ch":36,
"b1tch":20,
"bassterds":25,
"bastard":25,
"bastards": 26,
"basterd":25,
"bi+ch":34,
"bi7ch":25,
"bitch":47,
"bitches": 49,
"blackout": 30,
"blowjob":16,
"boffing":26,
"boiolas":35,
"bollock":50,
"boob": 21,
"boobs":27,
"boobies":13,
"breasts":25,
"buceta":40,
"butt-pirate":14,
"butthole":30,
"buttwipe":49,
"c0ck":35,
"c0k":13,
"cabron":45,
"cawk":23,
"cazzo":29,
"chink":50,
"chraa":14,
"chuj":21,
"cipa":20,
"clit":18,
"clits":18,
"cnts":39,
"cntz":19,
"cocaine":35,
"cock":30,
"cocks": 32,
"crap":30,
"craps":30,
"crapped": 34,
"cum":45,
"cunt":70,
"cunts":70,
"d4mn":49,
"dang":1,
"dangit":2,
"darn":1,
"dammit":29,
"damn":24,
"damnit":24,
"damned":28,
"daygo":27,
"dego":14,
"diarrhea":20,
"dick":43,
"dicks":48,
"dicked": 48,
"dike":37,
"dild0":41,
"dildo":31,
"dildos":31,
"dilld0":22,
"dirsa":45,
"dominatricks":44,
"dominatrics":26,
"dominatrix":16,
"doosher":35,
"douche": 29,
"douches": 23,
"douching": 30,
"drunk": 20,
"drunks": 24,
"dupa":12,
"dyke":41,
"dykes":42,
"dziwka":17,
"ejaculate":42,
"ejaculated":42,
"ejaculates":42,
"ejakulate":15,
"enculer":40,
"enema":14,
"enemas":14,
"faen":42,
"fag":90,
"fagot": 90,
"faggy": 90,
"fags":90,
"faggot":90,
"faggots":152,
"faig":39,
"fanculo":15,
"fanny":43,
"fart":28,
"fcuk":13,
"feces":31,
"feg":28,
"ficken":18,
"fingered": 20,
"fingering": 25,
"fisting": 30,
"fitt":32,
"foreskin":41,
"fuck":50,
"fucks":50,
"fucker":50,
"fuckers":50,
"fucked":50,
"fuck":50,
"fuk":41,
"fuks":41,
"fukked":41,
"futkretzn":10,
"fux0r":45,
"goddamn": 42,
"g00k":44,
"gook":11,
"gooks":19,
"guiena":15,
"h00r":37,
"h0ar":16,
"h0r":45,
"h0re":48,
"h4x0r":28,
"hangover": 20,
"heck": 12,
"hella":20,
"hell":20,
"hells":20,
"helvete":34,
"hoar":50,
"hoer":22,
"homo": 45,
"honkey":33,
"hoor":44,
"hore":19,
"hui":32,
"hungover": 20,
"injun":28,
"idiot": 21,
"jackoff":21,
"jap":42,
"jerk": 12,
"jerk-off":29,
"jerking": 20,
"jisim":48,
"jism":39,
"jiss":47,
"jizm":47,
"jizz":50,
"kanker":15,
"kawk":49,
"kike":40,
"klootzak":19,
"knob":25,
"knulle":39,
"kraut":32,
"kuk":22,
"kuksuger":29,
"kunt":11,
"kurwa":35,
"kusi":25,
"kyrpa":48,
"l3i+ch":22,
"l3itch":44,
"lesbo":37,
"mamhoon":39,
"marijuana": 32,
"masochist":12,
"masokist":19,
"massterbait":31,
"masstrbait":26,
"masstrbate":50,
"masterbaiter":21,
"masterbat":19,
"masturbate":41,
"merd":37,
"mibun":45,
"mofo":34,
"monkleigh":48,
"mouliewop":15,
"muie":14,
"mulkku":12,
"muschi":49,
"n1gr":23,
"nastt":42,
"nazi":31,
"nazis":29,
"nepesaurio":28,
"nig": 45,
"nigz": 45,
"nigga":44,
"nigger":81,
"niggers":81,
"nigur":12,
"niiger":33,
"niigr":38,
"nutsack":12,
"orafis":23,
"orgasm":18,
"orgasum":25,
"oriface":37,
"orifice":14,
"orifiss":21,
"orospu":17,
"poo":4,
"p0rn":39,
"porn":39,
"pornography":39,
"packi":16,
"packy":24,
"paki":39,
"paky":42,
"paska":42,
"pecker":18,
"peeenus":23,
"peenus":11,
"peinus":26,
"pen1s":24,
"penas":25,
"penis":50,
"penises":50,
"penus":32,
"penuus":42,
"perse":34,
"picka":38,
"pierdol":16,
"pillu":38,
"pimmel":34,
"pimpis":47,
"piss":41,
"pizda":42,
"plastered":15,
"polac":17,
"polak":49,
"poontsee":14,
"poop":14,
"poops":14,
"pooped":14,
"porn":17,
"pr0n":15,
"pr1c":48,
"pr1ck":50,
"pr1k":28,
"puke": 15,
"pula":11,
"pule":28,
"pusse":17,
"pussee":15,
"pussy":50,
"pussies":50,
"puta":49,
"puto":36,
"puuke":42,
"qahbeh":47,
"queef":12,
"queer":12,
"qweir":31,
"rautenberg":25,
"recktum":48,
"rectum":44,
"retard":36,
"s.o.b.":27,
"sadist":13,
"scank":36,
"schaffer":13,
"scheiss":10,
"schlampe":24,
"schlong":35,
"schmuck":16,
"schmucks":19,
"schwasted":17,
"screw":39,
"screwed":39,
"screws":39,
"screwing":49,
"scrotum":39,
"semen":18,
"sex":47,
"sexy":47,
"sh!+":16,
"sh1t":20,
"sh1tz":50,
"sharmuta":45,
"sharmute":28,
"shat": 15,
"shemale":38,
"shi+":11,
"shipal":44,
"shit":36,
"shits":36,
"shitted":39,
"shitty":36,
"shitter":36,
"shmuck": 23,
"shmucks": 15,
"shiz":26,
"skanck":40,
"skank":40,
"skanky":40,
"skanked":40,
"skanks":40,
"skribz":16,
"skurwysyn":18,
"slut":26,
"sluts":26,
"slutty": 19,
"smut":47,
"son-of-a-bitch":48,
"sphencter":11,
"spic":33,
"spics":33,
"spierdalaj":49,
"splooge":11,
"splooged":11,
"suka":42,
"teets":42,
"teez":22,
"testical":30,
"testicle":33,
"testicles":36,
"tit":22,
"tits":22,
"titties":22,
"titty":22,
"turd":37,
"turds":37,
"twat":50,
"twats":50,
"va1jina":15,
"vag1na":29,
"vagiina":33,
"vagina":24,
"vaginas":24,
"vaj1na":37,
"vajina":16,
"vittu":49,
"vullva":16,
"vulva":12,
"w00se":40,
"w0p":11,
"wank":26,
"wanker":29,
"wanks":41,
"wanked":41,
"wasted": 15,
"weed":25,
"wetback":12,
"wh00r":38,
"wh0re":18,
"whacking off": 20,
"whoar":46,
"whore":15,
"whores":19,
"whored":22,
"wichser":19,
"wop":29,
"wops":29,
"xrated":10,
"xxx":49,
"yed":18,
"zabourah":16
};

window.fbAsyncInit = function() {
  //prod: 1420062641557251
  //dev: 501949316569863
  // init the FB JS SDK
  FB.init({
    appId      : '501949316569863',                        // App ID from the app dashboard
    channelUrl : 'http://www.yourdirtymouth.com/channel.html', // Channel file for x-domain comms
    status     : true,                                 // Check Facebook Login status
    xfbml      : true,                                 // Look for social plugins on the page
    cookie      :true
  });

  $("#login").show();
};
//herpy derp
// Load the SDK asynchronously
$("#login").click(function(){
  login();
});

$("#logout").click(function(){
  
  FB.logout(function(response) {
    $("#shitlist-list").html($("<h3>").html("This never happened."));
  });
  
});

(function(d, s, id){
   var js, fjs = d.getElementsByTagName(s)[0];
   if (d.getElementById(id)) {return;}
   js = d.createElement(s); js.id = id;
   js.src = "https://connect.facebook.net/en_US/all.js";
   fjs.parentNode.insertBefore(js, fjs);
 }(document, 'script', 'facebook-jssdk'));
  
function getData(d) {
    var b = 100;
    var a = 6;
    for (var c = 0; c < a; c++) {
        needLoadCount++;
        FB.api(d + "&limit=" + b + "&offset=" + b * c, function (f) {
            doneLoadCount++;
            if (doneLoadCount == needLoadCount) {
                finishedLoading();
            }
            if (f.error) {
                console.log(d, f.error.message);
                return
            }
            if (!f || !f.data || !f.data.length) {
                return
            }
            var i = f.data;
            for (j = 0; j < i.length; j++) {
                var g = i[j];
                if(g.from) {
                  isPhoto = true;
                }
                if (!g.from || g.from.id == userID) {
                    var h = g.message;
                    if (!h) {
                        h = g.name
                    }
                    var isPhoto = false;
                    if (h) {
                        // var tokens = g.id.split("_");
                        // var id = tokens[tokens.length - 1]; 
                        addMessage([h, g.id, isPhoto])
                    }
                }
                var l = g.comments;
                if (!l || !l.data || !l.data.length) {
                    continue
                }
                for (var e = 0; e < l.data.length; e++) {
                    var m = l.data[e];
                    if (m.from && m.from.id == userID && m.message) {
                        // var tokens = m.id.split("_");
                        // var id = tokens[tokens.length - 1]; 
                        addMessage([m.message, m.id, isPhoto])
                    }
                }
            }
        })
    }
}

function finishedLoading() {
  stopLoading();
  counts = vulgarCount(messages);
  
  if (counts.length == 0) {
    $("#clean").html("<h2>Congrats. You have a clean mouth :)</h2><a id='share' class='btn btn-large btn-info' onclick=\"share('My mouth is clean :)')\">Share your clean mouth</a>");

  }

  for (var i=0; i<500; i++) {
    if (!counts[i] || counts[i][1] == 0) break;
    $("#shitlist-list").append("<li class='panel panel-default' style='font-size:20px;padding:10px;'>" + counts[i][0].replace(/"/g,"").replace(/\"/g,"") + "<br><br><a id='share' class='btn btn-large btn-info' onclick=\"share('" + counts[i][0].replace(/"/g,"").replace(/\"/g,"").replace(/'/g,"\\'").replace(/\n/g," ") + "');\">Share this again!</a><br><br><a class='btn btn-large btn-danger' target=\"_blank\" href=\"https://www.facebook.com/" + (counts[i][3] ? "photo.php?fbid=" + counts[i][2] : userID + "/posts/" + counts[i][2] )+ "\">I don't think this was a good idea...</a></li>");
  }

  $("#share").show();
}

function vulgarCount(messageArray) {
  var offensive = [];
  for (var n in messageArray){
    var vulgarity = 0;
    for (var key in phrases) {
      m = messageArray[n][0].match(new RegExp(key,"gi"));
      if (m) vulgarity += m.length * scores[key];   
    }
    var ws = messageArray[n][0].split(" ");
    for (var i in ws) {
      var w = ws[i].toLowerCase().replace(/[^a-z]/g,"");
      vulgarity += scores[w] || 0;      
    }
    if (vulgarity > 0) offensive.push([messageArray[n][0].toString(), vulgarity, messageArray[n][1], messageArray[n][2]]);
  }
  return offensive.sort(function(a,b) {
    return b[1]-a[1];
  });
}

function addMessage(a) {
  if (messages.length > 1000) {
      return
  }
  messages.push(a);
}
  

function resetData() {
  messages = [];
  needLoadCount = 0;
  doneLoadCount = 0;
  startLoading()
}


function loadData() {
  resetData();
  getData("/me/posts?fields=message,comments.fields(from,message)");
  getData("/me/feed?fields=from,message,comments.fields(from,message)");
  getData("/me/statuses?fields=message,comments.fields(from,message)");
  getData("/me/links?fields=message,comments.fields(from,message)");
  getData("/me/checkins?fields=message,comments.fields(from,message)");
  getData("/me/photos?fields=from,name,comments.fields(from,message)")
}

function login() {
  FB.login(function (a) {
    if (a && a.status == "connected") {
      userID = a.authResponse.userID;
      loadData();
    }
  }, {
    scope: "user_status,user_photos"
  });
  $("#shitlist-list").html($("<h3>").html(""));
}

function stopLoading() {
  $("#loader").html("");
}

function startLoading() {
  $("#loader").html("<img src='http://jimpunk.net/Loading/wp-content/uploads/loading1.gif'>");
}

 var share = function(shitToShare) {
  FB.ui({
      method: "feed",
      display: "iframe",
      link: "http://yourdirtymouth.com/",
      caption: "My most offensive comments. How dirty is YOUR mouth?",
      description: shitToShare,
      picture: "https://s3.amazonaws.com/www.yourdirtymouth.com/rsz_smile.png"
  });
};


</script>
</html>